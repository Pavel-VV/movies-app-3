(function(){"use strict";var t={945:function(t,e,o){var s=o(6848),a=o(6178),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("MoviesLoader"),e("ShowToast"),e("FonBg",{attrs:{posterBg:t.movieBg}}),e("MoviesHeader"),e("MoviesList",{attrs:{list:t.moviesList},on:{onGetMovieBg:t.getBgFon}}),e("MoviesPagination",{attrs:{currPage:t.currentPage,perPage:t.moviesPerPage,total:t.totalMoviesLength},on:{changeCurrentPage:t.onChangeCurrentPage}})],1)},r=[],n=(o(4114),function(){var t=this,e=t._self._c;return e("BContainer",[e("h3",{staticClass:"list-title"},[t._v(t._s(t.moviesTitle))]),e("BRow",[t.isExist?t._l(t.list,function(o,s){return e("BCol",{key:s,attrs:{cols:"3"}},[e("MovieItem",{attrs:{movie:o},on:{onEventDeleteMovie:t.deleteMovie,onEventMovieInfo:t.getMovieInfo},nativeOn:{mouseover:function(e){return t.getMovieBg(o.Poster)}}})],1)}):[e("div",[t._v("Empty List")])]],2),e("BModal",{attrs:{"body-class":"modal-info",id:"movie-modal-info","hide-footer":"","hide-header":"",size:"lg"}},[e("MovieInfoModal",{attrs:{movie:t.movieInfo},on:{onEventCloseInfo:t.closeModalInfo}})],1)],1)}),l=[],c=o(3518),v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"movie-item"},[e("div",{staticClass:"movie-item-poster",style:t.posterBackground}),e("div",{staticClass:"movie-info-wrap"},[e("div",{staticClass:"movie-info"},[e("h3",{staticClass:"movie-title"},[t._v(t._s(t.movie.Title))]),e("span",{staticClass:"movie-year"},[t._v(t._s(t.movie.Year))])]),e("div",{staticClass:"control-panel"},[e("BButton",{staticClass:"control-btn mr-2",attrs:{variant:"outline-light"},on:{click:t.eventMovieInfo}},[t._v("Info")]),e("BButton",{staticClass:"control-btn ml-2",attrs:{variant:"outline-light"},on:{click:t.eventDeleteMovies}},[t._v("Delete")])],1)])])},u=[],d={name:"MovieItem",props:{movie:{type:Object,required:!0}},data:()=>({defaultBg:"linear-gradient(45deg, #270133, #940294)"}),computed:{posterBackground(){return{"background-image":this.backgroundStyle}},backgroundStyle(){return"N/A"===this.movie.Poster?this.defaultBg:`url( ${this.movie.Poster} )`}},methods:{eventDeleteMovies(){this.$emit("onEventDeleteMovie",{id:this.movie.imdbID,title:this.movie.Title})},eventMovieInfo(){this.$emit("onEventMovieInfo",this.movie.imdbID)}}},m=d,g=o(1656),h=(0,g.A)(m,v,u,!1,null,"2d2a363a",null),f=h.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"info-modal"},[e("header",{staticClass:"header"},[e("h6",{staticClass:"movie-header-title"},[t._v("Movie info")]),e("p",[t._v(t._s(t.movie.Title))]),e("BIcon",{staticClass:"close-info",attrs:{icon:"x"},on:{click:t.eventCloseInfo}})],1),e("div",{staticClass:"movie-info-wrap"},[e("BRow",[e("BCol",{attrs:{sm:"4"}},[e("div",{staticClass:"movie-poster-wrap"},[e("div",{staticClass:"movie-poster",style:t.backgroundStyle})])]),e("BCol",{staticClass:"movie-info",attrs:{sm:"8"}},[e("h3",{staticClass:"movie-title"},[t._v(t._s(t.movie.Title))]),e("BFormRating",{staticClass:"rating-stars",attrs:{stars:"10","no-border":"",readonly:"","show-value":"",precision:"1","show-value-max":""},model:{value:t.movieRating,callback:function(e){t.movieRating=e},expression:"movieRating"}}),e("p",{staticClass:"movie-plot"},[t._v(t._s(t.movie.Plot))]),e("div",{staticClass:"badge-wrap"},[e("BBadge",{staticClass:"badge-style",attrs:{variant:"success"}},[t._v(t._s(t.movie.Year))]),e("BBadge",{staticClass:"badge-style",attrs:{variant:"success"}},[t._v(t._s(t.movie.Runtime))]),e("BBadge",{staticClass:"badge-style",attrs:{variant:"success"}},[t._v(t._s(t.movie.Gender))]),e("BBadge",{staticClass:"badge-style",attrs:{variant:"success"}},[t._v(t._s(t.movie.Language))])],1),e("table",{staticClass:"table small"},[e("tbody",[e("tr",[e("th",[t._v("Production")]),e("td",[t._v(t._s(t.movie.Production))])]),e("tr",[e("th",[t._v("Actors")]),e("td",[t._v(t._s(t.movie.Actors))])]),e("tr",[e("th",[t._v("Awards")]),e("td",[t._v(t._s(t.movie.Awards))])]),e("tr",[e("th",[t._v("Country")]),e("td",[t._v(t._s(t.movie.Country))])]),e("tr",[e("th",[t._v("Director")]),e("td",[t._v(t._s(t.movie.Director))])]),e("tr",[e("th",[t._v("Writer")]),e("td",[t._v(t._s(t.movie.Writer))])])])])],1)],1)],1)])},_=[],M={name:"MovieInfoModal",props:{movie:{type:Object,default:()=>({})}},data:()=>({imdbRatingMod:null,defaultPoster:"linear-gradient(45deg, #270133, #940294)"}),methods:{eventCloseInfo(){this.$emit("onEventCloseInfo")}},computed:{backgroundPoster(){return this.movie.Poster?`url(${this.movie.Poster})`:this.defaultPoster},backgroundStyle(){return{"background-image":`${this.backgroundPoster}`}},movieRating:{get(){return this.imdbRatingMod||this.movie.imdbRating},set(t){this.imdbRatingMod=t,console.log(this.imdbRatingMod)}}}},b=M,I=(0,g.A)(b,p,_,!1,null,"e5039262",null),C=I.exports,P={name:"MoviesList",components:{MovieItem:f,MovieInfoModal:C},props:{list:{type:Object,default:()=>({})}},data:()=>({movieInfoID:"null"}),computed:{...(0,c.L8)("movies",["searchState"]),isExist(){return Boolean(Object.keys(this.list).length)},moviesTitle(){return this.searchState?"Search movies":"IMDB top 250"},movieInfo(){return this.movieInfoID?this.list[this.movieInfoID]:"null"}},methods:{...(0,c.i0)("movies",["deleteMovieId"]),getMovieBg(t){this.$emit("onGetMovieBg",t)},async deleteMovie({id:t,title:e}){const o=await this.$bvModal.msgBoxConfirm(`Are you sure delete "${e}"?`);o&&this.deleteMovieId(t),console.log(t,e)},getMovieInfo(t){this.movieInfoID=t,this.$bvModal.show("movie-modal-info")},closeModalInfo(){this.movieInfoID="null",this.$bvModal.hide("movie-modal-info")}}},S=P,y=(0,g.A)(S,n,l,!1,null,"21022b84",null),D=y.exports,B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"movies-bg",style:t.posterStyle})},E=[],A={name:"FonBg",props:{posterBg:{type:String,default:""}},data:()=>({defaultBg:"linear-gradient(45deg, #270133, #940294)"}),computed:{bgImage(){return this.posterBg?`url(${this.posterBg})`:this.defaultBg},posterStyle(){return{"background-image":`${this.bgImage}`}}}},L=A,w=(0,g.A)(L,B,E,!1,null,"6271d8ea",null),T=w.exports,O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"movies-pagination"},[e("BPagination",{attrs:{"total-rows":t.total,"per-page":t.perPage,"next-text":"Next","prev-text":"Prev","hide-ellipsis":""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},k=[],x={name:"MoviesPagination",data:()=>({currentPageData:1}),props:{currPage:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1}},computed:{currentPage:{get(){return this.currPage},set(t){this.currentPageData=t,this.$emit("changeCurrentPage",t)}}}},R=x,$=(0,g.A)(R,O,k,!1,null,"1bb65f5a",null),G=$.exports,N=function(){var t=this,e=t._self._c;return t.getStateLoader?e("div",{staticClass:"movies-loader"},[e("BSpinner",{attrs:{type:"grow",variant:"light",label:"Loading..."}})],1):t._e()},j=[],F={name:"MoviesLoader",computed:{...(0,c.L8)(["getStateLoader"])}},H=F,V=(0,g.A)(H,N,j,!1,null,"4c2c8864",null),q=V.exports,U=function(){var t=this,e=t._self._c;return e("header",{staticClass:"header"},[e("BNavbar",{staticClass:"navbar",attrs:{type:"dark",variant:"dark"}},[e("BContainer",[e("BNavbarBrand",{attrs:{href:"#"}},[t._v("MovieDB")]),e("BNavForm",[e("BFormInput",{staticClass:"mr-sm-2 search",attrs:{placeholder:"Search",debounce:"500"},model:{value:t.searchMovies,callback:function(e){t.searchMovies=e},expression:"searchMovies"}})],1)],1)],1)],1)},Q=[],W={name:"MoviesHeader",data:()=>({searchMovies:""}),watch:{searchMovies:"getDataInput"},methods:{...(0,c.i0)("movies",["getSearchMovies","toggleSearch","fetchMovies"]),getDataInput(t){t?(this.getSearchMovies(t),this.toggleSearch(!0)):(this.toggleSearch(!1),this.fetchMovies())}}},Y=W,z=(0,g.A)(Y,U,Q,!1,null,"45305a7c",null),J=z.exports,K=function(){var t=this,e=t._self._c;return e("div")},X=[],Z={name:"ShowToast",watch:{getLastToast:"showToast"},computed:{...(0,c.L8)(["getLastToast"])},methods:{showToast({msg:t,title:e,variant:o}){this.$bvToast.toast(t,{title:e,variant:o})}}},tt=Z,et=(0,g.A)(tt,K,X,!1,null,"042b2b40",null),ot=et.exports,st={name:"App",components:{MoviesList:D,FonBg:T,MoviesPagination:G,MoviesLoader:q,MoviesHeader:J,ShowToast:ot},data:()=>({movieBg:""}),watch:{"$route.query":{handler:"getQueryPage",immediate:!0,deep:!0}},computed:{...(0,c.L8)("movies",["moviesList","currentPage","moviesPerPage","totalMoviesLength"])},methods:{...(0,c.i0)("movies",["changeCurrentPage"]),getQueryPage({page:t=1}){this.changeCurrentPage(Number(t))},getBgFon(t){this.movieBg=t},onChangeCurrentPage(t){this.$router.push({query:{page:t}})}}},at=st,it=(0,g.A)(at,i,r,!1,null,null,null),rt=it.exports,nt=(o(8111),o(1701),o(8237),o(4373));function lt(t){const e=t.params||{};return t.params=Object.assign(e,{apikey:"cbd64317",plot:"full"}),t}function ct(t){return t.data}function vt(t){t.interceptors.request.use(lt),t.interceptors.response.use(ct)}const ut=nt.A.create({baseURL:"https://www.omdbapi.com"});vt(ut);var dt=ut,mt={MOVIES:"MOVIES",CURRENT_PAGE:"CURRENT_PAGE",CHANGE_LOADER:"CHANGE_LOADER",DELETE_MOVIE:"DELETE_MOVIE",CHANGE_IDS:"CHANGE_IDS",SAVE_MDF250IDS:"SAVE_MDF250IDS",TOGGLE_SEARCH:"TOGGLESEARCH",ADD_TOAST:"ADD_TOAST"},gt=["tt0111161","tt0068646","tt0071562","tt0468569","tt0050083","tt0108052","tt0167260","tt0110912","tt0060196","tt0137523","tt0120737","tt0109830","tt0080684","tt1375666","tt0167261","tt0073486","tt0099685","tt0133093","tt0047478","tt0114369","tt0317248","tt0076759","tt0102926","tt0038650","tt0118799","tt4633694","tt0114814","tt0245429","tt0120815","tt0110413","tt0120689","tt0816692","tt0054215","tt0120586","tt0021749","tt0064116","tt0034583","tt0027977","tt0253474","tt1675434","tt0407887","tt0088763","tt0103064","tt2582802","tt0047396","tt0082971","tt0110357","tt0172495","tt0482571","tt0078788","tt0209144","tt0078748","tt0095765","tt0032553","tt0095327","tt0043014","tt0405094","tt0057012","tt4154756","tt0050825","tt0081505","tt1853728","tt0910970","tt0119698","tt0051201","tt0364569","tt1345836","tt0169547","tt0090605","tt0087843","tt2380307","tt0082096","tt0033467","tt0112573","tt0052357","tt0053125","tt0105236","tt0086190","tt5311514","tt0022100","tt0086879","tt5074352","tt0180093","tt0986264","tt0056172","tt1187043","tt0338013","tt0062622","tt0066921","tt0114709","tt0211915","tt0036775","tt0045152","tt0075314","tt0361748","tt0093058","tt0040522","tt0056592","tt0012349","tt0070735","tt0119217","tt0435761","tt2106476","tt0208092","tt0086250","tt0071853","tt0059578","tt0053604","tt0017136","tt0119488","tt1832382","tt0097576","tt0042876","tt1049413","tt0042192","tt0372784","tt0055630","tt0053291","tt0105695","tt0363163","tt0095016","tt0040897","tt0113277","tt8108198","tt0044741","tt1255953","tt0081398","tt0057115","tt0118849","tt0457430","tt0476735","tt0071315","tt0041959","tt0096283","tt0347149","tt0089881","tt0055031","tt1305806","tt0015864","tt0050212","tt0268978","tt1727824","tt0120735","tt0112641","tt0047296","tt5027774","tt0050976","tt2096673","tt0080678","tt0993846","tt3170832","tt0434409","tt0031679","tt1291584","tt0083658","tt0046912","tt0050986","tt0017925","tt0477348","tt0117951","tt0469494","tt0167404","tt0031381","tt0084787","tt0116282","tt1205489","tt0077416","tt0266543","tt0091251","tt0015324","tt0118715","tt1130884","tt0266697","tt0061512","tt0032976","tt0046438","tt0978762","tt2119532","tt2267998","tt0892769","tt0018455","tt3011894","tt0107290","tt0758758","tt0120382","tt0107207","tt2278388","tt0025316","tt0079470","tt0092005","tt0091763","tt0079944","tt0116231","tt0074958","tt0353969","tt0060827","tt0052618","tt0395169","tt2024544","tt0405159","tt0060107","tt0019254","tt0046268","tt0112471","tt1979320","tt1392190","tt0053198","tt1392214","tt1028532","tt1895587","tt3315342","tt0245712","tt0405508","tt0093779","tt0264464","tt0087544","tt1201607","tt0064115","tt0075148","tt0072684","tt0198781","tt0032551","tt0033870","tt0097165","tt0088247","tt0246578","tt0083987","tt0046911","tt0113247","tt0107048","tt0050783","tt0032138","tt0118694","tt0073195","tt1454029","tt4016934","tt2991224","tt4430212","tt0056443","tt0381681","tt0070510","tt0087884","tt0092067","tt1954470","tt0036868","tt0083922","tt2338151","tt2015381","tt0169102","tt0056801"];function ht(t){const e=t.reduce((t,e)=>(t[e.imdbID]=e,t),{});return e}function ft(t){const e=t.reduce((t,e)=>(t.push(e.imdbID),t),[]);return e}const{MOVIES:pt,CURRENT_PAGE:_t,DELETE_MOVIE:Mt,CHANGE_IDS:bt,SAVE_MDF250IDS:It,TOGGLE_SEARCH:Ct}=mt,Pt={namespaced:!0,state:{IDs:gt,modified250IDs:"",moviesPerPage:12,currentPage:1,movies:{},searchState:!1},getters:{slicedIDs:({IDs:t})=>(e,o)=>t.slice(e,o),currentPage:({currentPage:t})=>t,moviesPerPage:({moviesPerPage:t})=>t,totalMoviesLength:({IDs:t})=>t.length,moviesList:({movies:t})=>t,searchState:({searchState:t})=>t},mutations:{[pt](t,e){t.movies=e},[_t](t,e){t.currentPage=e},[Mt](t,e){t.IDs.splice(e,1)},[bt](t,e){t.IDs=e},[It](t,e){t.modified250IDs=e},[Ct](t,e){t.searchState=e}},actions:{async fetchMovies({getters:t,dispatch:e,state:o,commit:s}){try{e("changeStateLoader",!0,{root:!0}),!o.searchState&&o.modified250IDs&&(console.log("ids перезаписались"),s(bt,o.modified250IDs));const{slicedIDs:a,moviesPerPage:i,currentPage:r}=t,n=r*i-i,l=r*i,c=a(n,l),v=c.map(t=>dt.get(`/?i=${t}`)),u=await Promise.all(v),d=ht(u);console.log(d),s(pt,d)}catch(a){console.log(a)}finally{e("changeStateLoader",!1,{root:!0})}},changeCurrentPage({dispatch:t,commit:e},o){e(_t,o),t("fetchMovies")},deleteMovieId({state:t,dispatch:e,commit:o},s){console.log(s);const a=t.IDs.indexOf(s);-1!==a&&(o(Mt,a),e("fetchMovies"),e("addToast",{msg:`delete movie ${t.movies[s].Title}`,title:"Success",variant:"success"},{root:!0}))},async getSearchMovies({dispatch:t,commit:e,state:o},s){try{t("changeStateLoader",!0,{root:!0}),o.IDs.length>12&&e(It,o.IDs);const a=await dt.get(`/?s=${s}`);if(console.log(a),a.Error)throw Error(a.Error);const i=ft(a.Search);e(bt,i);const r=ht(a.Search);t("addToast",{msg:`Movies search success ${i.length}`,title:"Success",variant:"success"},{root:!0}),e(pt,r)}catch(a){console.log(a.message)}finally{t("changeStateLoader",!1,{root:!0})}},toggleSearch({commit:t},e){t(Ct,e)}}};var St=Pt;const{CHANGE_LOADER:yt}=mt,Dt={state:{stateLoader:!1},getters:{getStateLoader:({stateLoader:t})=>t},mutations:{[yt](t,e){t.stateLoader=e}},actions:{changeStateLoader({commit:t},e){t(yt,e)}}};var Bt=Dt;const{ADD_TOAST:Et}=mt,At={state:{toasts:[]},getters:{getLastToast:({toasts:t})=>t[t.length-1]},mutations:{[Et](t,e){t.toasts.push(e)}},actions:{addToast({commit:t},e){t(Et,e)}}};var Lt=At;s["default"].use(c.Ay);const wt=new c.Ay.Store({state:{},getters:{},mutations:{},actions:{},modules:{movies:St,moviesLoader:Bt,toast:Lt}});var Tt=wt,Ot=o(1641),kt=o(4486);o(9313);s["default"].use(Ot.vGs),s["default"].use(kt.hP),s["default"].config.productionTip=!1,s["default"].use(a.A);const xt=new a.A({mode:"history",base:"/",routes:[{path:"/",component:rt}]});new s["default"]({store:Tt,router:xt,render:t=>t(rt)}).$mount("#app")}},e={};function o(s){var a=e[s];if(void 0!==a)return a.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,o),i.exports}o.m=t,function(){var t=[];o.O=function(e,s,a,i){if(!s){var r=1/0;for(v=0;v<t.length;v++){s=t[v][0],a=t[v][1],i=t[v][2];for(var n=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(o.O).every(function(t){return o.O[t](s[l])})?s.splice(l--,1):(n=!1,i<r&&(r=i));if(n){t.splice(v--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var v=t.length;v>0&&t[v-1][2]>i;v--)t[v]=t[v-1];t[v]=[s,a,i]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,i,r=s[0],n=s[1],l=s[2],c=0;if(r.some(function(e){return 0!==t[e]})){for(a in n)o.o(n,a)&&(o.m[a]=n[a]);if(l)var v=l(o)}for(e&&e(s);c<r.length;c++)i=r[c],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(v)},s=self["webpackChunkmovies_app_3"]=self["webpackChunkmovies_app_3"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],function(){return o(945)});s=o.O(s)})();
//# sourceMappingURL=app.fd09ccb8.js.map